<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Test | typer.app</title>
    <link rel="stylesheet" href="style.css">
    <!-- Stylish fonts for title and description -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue:wght@400;700&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
    <style>
    /* Extra styles for test page only */
    .test-card {
        max-width: 470px;
        width: 100%;
        margin: 0 auto;
        background: #fff;
        border-radius: 32px;
        box-shadow: 0 8px 40px #4285f445, 0 2px 8px #e3f0ff;
        border: 2px solid #e3f0ff;
        padding: 2rem 2rem 2rem 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        animation: fadeInUp 1.2s cubic-bezier(.68,-0.55,.27,1.55) both;
        margin-bottom: 3rem;
        position: relative;
    }
    .typing-display {
        font-size: 1.15rem;
        padding: 0.9rem 1.2rem;
        margin-bottom: 0.7rem;
        border-radius: 10px;
        background: #f7f9fb;
        min-height: 66px;
        box-shadow: 0 2px 10px #60a5fa11;
        word-break: break-word;
        width: 100%;
        text-align: left;
        letter-spacing: 1px;
    }
    .typing-input {
        width: 100%;
        padding: 0.75rem 1.1rem;
        font-size: 1.09rem;
        border-radius: 13px;
        border: 2px solid #e3f0ff;
        margin-bottom: 0.6rem;
        outline: none;
        background: #fff;
        box-shadow: 0 2px 10px #60a5fa11;
        transition: border-color 0.16s;
    }
    .typing-input:focus {
        border-color: #4285f4;
    }
    .live-stats {
        font-size: 1.13rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        margin-top: 0.1rem;
        display: flex;
        gap: 2.5rem;
        justify-content: center;
    }
    .result-box {
        margin-top: 1.2rem;
        font-size: 1.18rem;
        font-weight: bold;
        text-align: center;
        display: none;
        background: #e3f0ff;
        color: #2059c5;
        border-radius: 10px;
        padding: 1rem 0.7rem;
        box-shadow: 0 2px 10px #4285f444;
        letter-spacing: 1px;
        position: relative;
    }
    .main-btn {
        margin-top: 1.1rem;
        min-width: 120px;
        max-width: 220px;
    }
    /* Highlight styles */
    .typed-correct { color: #34d853; font-weight: bold; background: #e6ffe5; border-radius: 2px; }
    .typed-wrong   { color: #e84545; font-weight: bold; background: #ffe6e6; border-radius: 2px; }
    /* Keyboard styles */
    .keyboard-container {
        width: 100%;
        max-width: 410px;
        margin: 1.7rem auto 0 auto;
        background: #f7f9fb;
        border-radius: 16px;
        box-shadow: 0 2px 12px #60a5fa22;
        padding: 0.8rem 0.5rem 0.4rem 0.5rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        user-select: none;
    }
    .keyboard-row {
        display: flex;
        justify-content: center;
        gap: 0.23rem;
        margin-bottom: 0.19rem;
    }
    .keyboard-key {
        background: #fff;
        border: 1.6px solid #e3f0ff;
        border-radius: 7px;
        font-size: 1rem;
        width: 34px;
        height: 38px;
        text-align: center;
        margin: 0 2px;
        box-shadow: 0 2px 6px #60a5fa11;
        transition: background 0.14s, border-color 0.14s, color 0.14s;
        color: #4285f4;
        font-weight: 500;
        display: flex;
        align-items: center;
        justify-content: center;
        letter-spacing: 1.2px;
        position: relative;
    }
    .keyboard-key.active {
        background: #4285f4;
        color: #fff;
        border-color: #34a853;
        box-shadow: 0 0 18px #0ffca7bb;
        z-index: 2;
        font-weight: bold;
    }
    .keyboard-key.space {
        width: 134px;
    }
    .keyboard-key.enter, .keyboard-key.shift, .keyboard-key.tab, .keyboard-key.backspace {
        width: 60px;
        font-size: 0.98rem;
    }
    .keyboard-key.caps {
        width: 48px;
        font-size: 0.97rem;
    }
    .keyboard-key.ctrl, .keyboard-key.alt {
        width: 44px;
        font-size: 0.95rem;
    }
    .keyboard-key.win {
        width: 40px;
        font-size: 0.95rem;
    }
    .keyboard-key.fn {
        width: 35px;
        font-size: 0.95rem;
    }
    .keyboard-key.arrow {
        width: 40px;
        font-size: 1rem;
    }
    .share-result-row {
        margin-top: 1.1rem;
        display: flex;
        justify-content: center;
        gap: 1.3rem;
    }
    .share-result-btn {
        border: none;
        background: #4285f4;
        color: #fff;
        border-radius: 9px;
        padding: 0.6em 1.2em;
        font-size: 1.02rem;
        font-weight: bold;
        cursor: pointer;
        margin-top: 0.3rem;
        transition: background 0.15s, transform 0.13s, box-shadow 0.16s;
        box-shadow: 0 2px 8px #60a5fa33;
        outline: none;
        display: flex;
        align-items: center;
        gap: 0.5em;
    }
    .share-result-btn:active {
        background: #2059c5;
        transform: scale(0.95);
    }
    .share-result-btn img {
        height: 17px;
        width: 17px;
        margin-right: 3px;
        vertical-align: middle;
    }
    @media (max-width: 600px) {
        .test-card { padding: 1.3rem 0.5rem 1.3rem 0.5rem; }
        .typing-display { font-size: 1rem; padding: 0.7rem 0.3rem; }
        .keyboard-container { max-width: 99vw; padding: 0.6rem 0.3rem 0.3rem 0.3rem;}
        .keyboard-key { font-size: 0.98rem; width: 31px; height: 31px; }
        .keyboard-key.space { width: 85px;}
        .keyboard-key.enter, .keyboard-key.shift, .keyboard-key.tab, .keyboard-key.backspace { width: 40px;}
        .keyboard-key.caps { width: 34px;}
        .keyboard-key.ctrl, .keyboard-key.alt { width: 32px;}
    }
    </style>
</head>
<body>
    <header class="main-header">
        <div class="header-left">
            <div class="tool-logo"><img src="logo.png" alt="Logo" /></div>
        </div>
        <div class="header-center">
            <h1 class="header-title">Typing Test</h1>
            <nav class="menu-nav">
                <ul>
                    <li><a href="index.html" class="menu-link">Home</a></li>
                    <li><a href="test.html" class="menu-link active">Test</a></li>
                    <li><a href="games.html" class="menu-link">Games</a></li>
                </ul>
            </nav>
        </div>
        <div class="header-right">
            <button class="dark-mode-toggle" id="darkModeToggle" title="Toggle dark mode"><span id="darkModeIcon">ðŸŒ™</span></button>
        </div>
    </header>
    <main class="main-body">
        <section class="center-content">
            <div class="website-title" style="margin-bottom:0.2em;">Check Your Typing Speed & Accuracy</div>
            <div class="website-description" style="margin-bottom:1.2em;">
                Type the given paragraph below as fast and accurately as you can. Your WPM and Accuracy will be tracked in real time!
            </div>
            <div class="test-card">
                <div id="typingDisplay" class="typing-display"></div>
                <input id="typingInput" type="text" autocomplete="off" autocapitalize="off" spellcheck="false" class="typing-input" placeholder="Start typing here..." />
                <div class="live-stats">
                    <span>WPM: <span id="liveWPM">0</span></span>
                    <span>Accuracy: <span id="liveAccuracy">100%</span></span>
                </div>
                <div id="resultBox" class="result-box"></div>
                <div class="share-result-row" style="display:none;" id="shareResultRow">
                    <button class="share-result-btn" id="shareTwitterBtn"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/twitter.svg" alt="">Twitter</button>
                    <button class="share-result-btn" id="shareWhatsappBtn"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/whatsapp.svg" alt="">WhatsApp</button>
                    <button class="share-result-btn" id="shareCopyBtn"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/link.svg" alt="">Copy Link</button>
                </div>
                <button id="restartBtn" class="main-btn">Restart</button>
                <!-- Keyboard display -->
                <div class="keyboard-container" id="keyboardContainer"></div>
            </div>
        </section>
    </main>
    <footer class="main-footer">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Privacy Policy</a></li>
            <li><a href="#">Terms of Service</a></li>
            <li><a href="#">About Us</a></li>
        </ul>
        <div class="copyright">
            Â© <span id="year"></span> Copyright
        </div>
    </footer>
    <script src="script.js"></script>
    <script>
        // Footer year
        document.getElementById("year").textContent = new Date().getFullYear();

        // Dark mode toggle (same logic as index.html)
        const darkModeBtn = document.getElementById("darkModeToggle");
        const darkModeIcon = document.getElementById("darkModeIcon");
        function setDarkMode(on) {
            if (on) {
                document.documentElement.classList.add('dark-mode');
                darkModeIcon.textContent = 'â˜€ï¸';
                localStorage.setItem('darkMode', 'enabled');
            } else {
                document.documentElement.classList.remove('dark-mode');
                darkModeIcon.textContent = 'ðŸŒ™';
                localStorage.setItem('darkMode', 'disabled');
            }
        }
        if (localStorage.getItem('darkMode') === 'enabled') {
            setDarkMode(true);
        } else {
            setDarkMode(false);
        }
        darkModeBtn.addEventListener('click', function () {
            setDarkMode(!document.documentElement.classList.contains('dark-mode'));
        });

        /* ----------- Keyboard Drawing & Key Highlight Logic ----------- */
        // Keyboard Layout (simple QWERTY for demo)
        const keyboardLayout = [
            ["Esc","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"],
            ["`","1","2","3","4","5","6","7","8","9","0","-","=","Backspace"],
            ["Tab","Q","W","E","R","T","Y","U","I","O","P","[","]","\\"],
            ["Caps","A","S","D","F","G","H","J","K","L",";","'","Enter"],
            ["Shift","Z","X","C","V","B","N","M",",",".","/","Shift"],
            ["Ctrl","Win","Alt","Space","Alt","Win","Menu","Ctrl"]
        ];

        function drawKeyboard() {
            const keyboard = document.getElementById("keyboardContainer");
            keyboard.innerHTML = ""; // Clear first
            keyboardLayout.forEach((row, rowIdx) => {
                const rowDiv = document.createElement("div");
                rowDiv.className = "keyboard-row";
                row.forEach(key => {
                    const keyDiv = document.createElement("div");
                    let keyClass = "keyboard-key";
                    if (key === "Space") keyClass += " space";
                    if (key === "Enter") keyClass += " enter";
                    if (key === "Shift") keyClass += " shift";
                    if (key === "Tab") keyClass += " tab";
                    if (key === "Backspace") keyClass += " backspace";
                    if (key === "Caps") keyClass += " caps";
                    if (key === "Ctrl") keyClass += " ctrl";
                    if (key === "Alt") keyClass += " alt";
                    if (key === "Win") keyClass += " win";
                    if (key === "Menu") keyClass += " fn";
                    if (["â†‘","â†“","â†","â†’"].includes(key)) keyClass += " arrow";
                    keyDiv.className = keyClass;
                    keyDiv.dataset.key = key;
                    keyDiv.textContent = key === "Space" ? "" : key;
                    rowDiv.appendChild(keyDiv);
                });
                keyboard.appendChild(rowDiv);
            });
        }
        drawKeyboard();

        // Key highlight function
        function highlightKey(keyName) {
            document.querySelectorAll('.keyboard-key').forEach(keyDiv => {
                keyDiv.classList.remove('active');
                // Space bar
                if (keyName === " " && keyDiv.dataset.key === "Space") keyDiv.classList.add("active");
                // Backspace
                else if (keyName === "Backspace" && keyDiv.dataset.key === "Backspace") keyDiv.classList.add("active");
                // Enter
                else if ((keyName === "Enter" || keyName === "â†µ") && keyDiv.dataset.key === "Enter") keyDiv.classList.add("active");
                // Shift
                else if (keyName === "Shift" && keyDiv.dataset.key === "Shift") keyDiv.classList.add("active");
                // Tab
                else if (keyName === "Tab" && keyDiv.dataset.key === "Tab") keyDiv.classList.add("active");
                // CapsLock
                else if (keyName === "CapsLock" && keyDiv.dataset.key === "Caps") keyDiv.classList.add("active");
                // Letters, numbers, symbols
                else if (keyDiv.dataset.key.toUpperCase() === keyName.toUpperCase()) keyDiv.classList.add("active");
            });
        }
        function clearKeyHighlight() {
            document.querySelectorAll('.keyboard-key').forEach(keyDiv => {
                keyDiv.classList.remove('active');
            });
        }

        // Listen for keydown/keyup on input
        const typingInput = document.getElementById("typingInput");
        typingInput.addEventListener("keydown", function(e){
            let key = e.key;
            if (key === " ") key = "Space";
            highlightKey(key);
        });
        typingInput.addEventListener("keyup", clearKeyHighlight);

        /* ----------- Share Result Logic ----------- */
        function showShareOptions(wpm, accuracy) {
            const shareRow = document.getElementById("shareResultRow");
            shareRow.style.display = "flex";
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(`My typing speed is ${wpm} WPM with ${accuracy}% accuracy! Try your own at typer.app`);
            document.getElementById("shareTwitterBtn").onclick = function() {
                window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`,"_blank");
            }
            document.getElementById("shareWhatsappBtn").onclick = function() {
                window.open(`https://wa.me/?text=${text}%20${url}`,"_blank");
            }
            document.getElementById("shareCopyBtn").onclick = function() {
                navigator.clipboard.writeText(`Typing Test Result: ${wpm} WPM, ${accuracy}% accuracy. Try it: ${window.location.href}`);
                this.textContent = "Copied!";
                setTimeout(() => { this.textContent = "Copy Link"; }, 1700);
            }
        }
    </script>
    <script>
    // ------------------------------
    // Typing Tool Main Logic Script
    // ------------------------------

    // Hard-coded paragraph
    const paragraphText =
      "Typing is a fundamental skill that helps you communicate efficiently with computers. Practice daily to improve your speed and accuracy, and learn to use all your fingers for the best results.";

    // Selectors for DOM elements
    const typingDisplay = document.getElementById("typingDisplay");
    const wpmDisplay = document.getElementById("liveWPM");
    const accuracyDisplay = document.getElementById("liveAccuracy");
    const resultBox = document.getElementById("resultBox");
    const restartBtn = document.getElementById("restartBtn");

    // State variables
    let started = false;
    let startTime = null;
    let timerInterval = null;
    let correctCount = 0;
    let errorCount = 0;
    let totalTyped = 0;

    // Utility: Render the paragraph with highlights for correct/incorrect typing
    function renderParagraph(userInput) {
      let html = "";
      for (let i = 0; i < paragraphText.length; i++) {
        let char = paragraphText[i];
        if (i < userInput.length) {
          if (userInput[i] === char) {
            html += `<span class="typed-correct">${char}</span>`;
          } else {
            html += `<span class="typed-wrong">${char}</span>`;
          }
        } else {
          html += `<span>${char}</span>`;
        }
      }
      typingDisplay.innerHTML = html;
    }

    // Utility: Calculate WPM
    function calculateWPM(charsTyped, elapsedSeconds) {
      if (elapsedSeconds === 0) return 0;
      const words = charsTyped / 5;
      const minutes = elapsedSeconds / 60;
      return Math.round(words / minutes);
    }

    // Utility: Calculate accuracy
    function calculateAccuracy(correct, total) {
      if (total === 0) return 100;
      return Math.round((correct / total) * 100);
    }

    // Timer: Start and update
    function startTimer() {
      startTime = Date.now();
      timerInterval = setInterval(() => {
        const elapsed = (Date.now() - startTime) / 1000;
        const wpm = calculateWPM(totalTyped, elapsed);
        const accuracy = calculateAccuracy(correctCount, totalTyped);
        wpmDisplay.textContent = wpm;
        accuracyDisplay.textContent = accuracy + "%";
      }, 200);
    }

    // Timer: Stop and show result
    function stopTimer() {
      clearInterval(timerInterval);
      const elapsed = (Date.now() - startTime) / 1000;
      const wpm = calculateWPM(totalTyped, elapsed);
      const accuracy = calculateAccuracy(correctCount, totalTyped);

      resultBox.innerHTML =
        `<div class="result-title">Typing Complete!</div>
         <div class="result-score">WPM: <b>${wpm}</b></div>
         <div class="result-accuracy">Accuracy: <b>${accuracy}%</b></div>`;
      resultBox.style.display = "block";
      showShareOptions(wpm, accuracy);
    }

    // Input Event
    typingInput.addEventListener("input", function (e) {
      const userInput = typingInput.value;
      if (!started && userInput.length > 0) {
        started = true;
        startTimer();
        resultBox.style.display = "none";
        document.getElementById("shareResultRow").style.display = "none";
      }

      correctCount = 0;
      errorCount = 0;
      totalTyped = userInput.length;

      for (let i = 0; i < userInput.length; i++) {
        if (userInput[i] === paragraphText[i]) {
          correctCount++;
        } else {
          errorCount++;
        }
      }

      renderParagraph(userInput);

      if (started) {
        const elapsed = (Date.now() - startTime) / 1000;
        wpmDisplay.textContent = calculateWPM(totalTyped, elapsed);
        accuracyDisplay.textContent = calculateAccuracy(correctCount, totalTyped) + "%";
      }

      if (userInput === paragraphText) {
        stopTimer();
        typingInput.disabled = true;
      }
    });

    // Reset test
    function resetTypingTest() {
      started = false;
      startTime = null;
      clearInterval(timerInterval);
      typingInput.value = "";
      typingInput.disabled = false;
      correctCount = 0;
      errorCount = 0;
      totalTyped = 0;
      wpmDisplay.textContent = "0";
      accuracyDisplay.textContent = "100%";
      resultBox.style.display = "none";
      document.getElementById("shareResultRow").style.display = "none";
      renderParagraph("");
    }
    restartBtn.addEventListener("click", resetTypingTest);

    // Initial Setup
    window.addEventListener("DOMContentLoaded", () => {
      renderParagraph("");
      wpmDisplay.textContent = "0";
      accuracyDisplay.textContent = "100%";
      resultBox.style.display = "none";
      document.getElementById("shareResultRow").style.display = "none";
    });
    </script>
</body>
</html>
