<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Temple Run Typing Game</title>
  <style>
    body {
      background: linear-gradient(120deg, #fbc2eb 0%, #a6c1ee 100%);
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    h1 {
      text-align: center;
      color: #fdc800;
      margin-top: 32px;
      letter-spacing: 3px;
      font-size: 2.2em;
      text-shadow: 0 2px 14px #d7263d, 0 1px 36px #fff;
      font-family: 'Trebuchet MS', 'Segoe UI', Arial, sans-serif;
    }
    #game-container {
      max-width: 500px;
      margin: 30px auto;
      background: linear-gradient(120deg, #ffe066 0%, #e9e9e9 100%);
      border-radius: 22px;
      box-shadow: 0 6px 32px #bfae5e77;
      padding: 22px 24px 34px 24px;
      position: relative;
      overflow: hidden;
    }
    .game-stats {
      display: flex;
      justify-content: space-between;
      font-size: 1.18em;
      margin-bottom: 12px;
      color: #d7263d;
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: 0 1px 4px #fff3;
    }
    #instruction {
      text-align: center;
      color: #376313;
      font-size: 1.08em;
      margin-bottom: 12px;
      font-weight: 600;
      letter-spacing: 1px;
      text-shadow: 0 1px 6px #ffe06688;
    }
    #temple-game-area {
      position: relative;
      height: 300px;
      background: linear-gradient(180deg, #a1c4fd 0%, #c2e9fb 65%, #f8ffae 100%);
      border-radius: 14px;
      overflow: hidden;
      margin-bottom: 18px;
      border: 2px solid #fdc800;
      box-shadow: 0 4px 24px #bfae5e44, 0 1px 8px #ffe06688 inset;
    }
    #track {
      position: absolute;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      width: 140px;
      height: 100%;
      background: repeating-linear-gradient(180deg, #8c7300 0 12px, #c2e9fb 12px 24px);
      opacity: 0.24;
      filter: blur(2px);
      border-radius: 40px 40px 30px 30px;
      z-index: 1;
    }
    #runner {
      position: absolute;
      left: 36px;
      bottom: 24px;
      width: 58px;
      height: 58px;
      border-radius: 50%;
      background: radial-gradient(circle at 38px 34px, #fdc800 60%, #d7263d 92%);
      border: 4px solid #d7263d;
      box-shadow: 0 2px 16px #fdc80099, 0 1px 12px #fff7 inset;
      z-index: 5;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.1em;
      color: #fff;
      font-weight: bold;
      animation: runnerRun 1s infinite alternate;
      transition: left 0.18s, bottom 0.18s;
    }
    @keyframes runnerRun {
      0% { transform: translateY(0);}
      100% { transform: translateY(-12px);}
    }
    .obstacle {
      position: absolute;
      right: -180px;
      bottom: 26px;
      font-size: 1.08em;
      font-weight: bold;
      padding: 10px 20px;
      border-radius: 22px;
      background: linear-gradient(90deg,#378a1e 25%,#fdc800 75%);
      color: #fff;
      box-shadow: 0 4px 18px #d7263d99, 0 1px 8px #ffe066cc inset;
      border: 2px solid #fdc800;
      opacity: 0.96;
      z-index: 4;
      user-select: none;
      letter-spacing: 2px;
      text-shadow: 0 1px 8px #8c7300aa, 0 1px 12px #fff7;
    }
    /* Animation for obstacle, duration is set by JS as inline style */
    @keyframes obstacleMove {
      0% { right: -180px; opacity: 0.98;}
      100% { right: 370px; opacity: 0.36;}
    }
    .obstacle.pass {
      animation: passAnim 0.38s cubic-bezier(.2,1.8,.7,1.7) forwards;
      filter: drop-shadow(0 0 18px #43cea2);
      background: linear-gradient(90deg,#43cea2 25%, #fdc800 75%) !important;
      color: #fff;
      opacity: 0.88;
      z-index: 7;
      font-style: italic;
    }
    @keyframes passAnim {
      0% { opacity: 1; transform: scale(1);}
      70% { opacity: 0.7; transform: scale(1.18);}
      100% { opacity: 0; right: 370px;}
    }
    .obstacle.hit {
      animation: hitAnim 0.32s cubic-bezier(.2,1.8,.7,1.7) forwards;
      filter: brightness(0.6) blur(3px);
      background: #7e8fa0 !important;
      color: #fff;
      opacity: 0.6;
      z-index: 8;
      text-shadow: none;
    }
    @keyframes hitAnim {
      0% { opacity: 1; }
      100% { opacity: 0; right: 370px;}
    }
    #typing-input {
      width: 92%;
      padding: 12px 18px;
      font-size: 1.12em;
      border: 2px solid #fdc800;
      border-radius: 10px;
      outline: none;
      margin-bottom: 12px;
      box-sizing: border-box;
      background: #fffde4;
      color: #d7263d;
      text-align: center;
      letter-spacing: 2px;
      font-weight: 600;
      box-shadow: 0 1px 8px #fdc80044 inset;
      transition: border 0.2s, box-shadow 0.2s;
    }
    #typing-input:disabled {
      background: #e9ecef;
      color: #a0a0a0;
      border: 2px solid #c2e9fb;
      box-shadow: none;
    }
    #start-btn, #restart-btn {
      padding: 11px 36px;
      background: linear-gradient(90deg,#d7263d,#fdc800);
      color: #fff;
      font-size: 1.13em;
      border: none;
      border-radius: 11px;
      cursor: pointer;
      margin: 10px 4px 10px 4px;
      font-weight: bold;
      box-shadow: 0 2px 8px #fdc80044, 0 1px 12px #d7263d22 inset;
      transition: background 0.23s, transform 0.18s;
      letter-spacing: 1.5px;
    }
    #start-btn:hover, #restart-btn:hover {
      background: linear-gradient(90deg,#43cea2,#fdc800);
      transform: scale(1.09);
    }
    #final-score {
      text-align: center;
      margin-top: 15px;
      font-size: 1.18em;
      color: #d7263d;
      font-weight: bold;
      letter-spacing: 2px;
      background: #fdc80022;
      border-radius: 12px;
      padding: 13px 0;
      display: none;
      box-shadow: 0 1px 8px #fdc80044 inset;
    }
  </style>
</head>
<body>
  <h1>Temple Run Typing Game</h1>
  <div id="game-container">
    <div class="game-stats">
      <span>‡§∏‡•ç‡§ï‡•ã‡§∞: <span id="score">0</span></span>
    </div>
    <div id="instruction">‡§Ü‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡•Ä ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç, ‡§§‡§≠‡•Ä ‡§ï‡§ø‡§∞‡§¶‡§æ‡§∞ ‡§¨‡§æ‡§ß‡§æ ‡§∏‡•á ‡§¨‡§ö ‡§∏‡§ï‡•á‡§ó‡§æ!</div>
    <div id="temple-game-area">
      <div id="track"></div>
      <div id="runner">üèÉ</div>
    </div>
    <input type="text" id="typing-input" placeholder="‡§∂‡§¨‡•ç‡§¶ ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç..." disabled autocomplete="off" />
    <button id="start-btn">Start</button>
    <button id="restart-btn" style="display:none;">Restart</button>
    <div id="final-score"></div>
  </div>
  <script>
    const words = [
      "temple", "run", "jump", "slide", "dodge", "escape", "danger", "chase", "track",
      "speed", "coin", "power", "boost", "score", "sprint", "obstacle", "action", "trail",
      "adventure", "rush", "move", "quick", "typing", "barrier", "challenge", "focus"
    ];
    let gameActive = false;
    let score = 0;
    let intervalId = null;
    let obstacleId = 0;
    let activeObstacle = null;

    const scoreEl = document.getElementById('score');
    const gameArea = document.getElementById('temple-game-area');
    const startBtn = document.getElementById('start-btn');
    const restartBtn = document.getElementById('restart-btn');
    const finalScoreEl = document.getElementById('final-score');
    const instructionEl = document.getElementById('instruction');
    const typingInputEl = document.getElementById('typing-input');
    const runnerEl = document.getElementById('runner');

    // Speed logic: slow at start, then gets faster
    function getCurrentObstacleSpeed() {
      if (score < 3) return 4800;
      if (score < 8) return 3600;
      if (score < 15) return 2600;
      if (score < 25) return 1800;
      return 1200;
    }

    function getRandomWord() {
      return words[Math.floor(Math.random() * words.length)];
    }

    function addObstacle() {
      if (!gameActive) return;
      if (activeObstacle) return; // Only one obstacle at a time
      const text = getRandomWord();
      const id = "obstacle-" + (++obstacleId);
      const el = document.createElement('div');
      el.textContent = text;
      el.className = 'obstacle';
      el.setAttribute('data-word', text);
      el.setAttribute('data-id', id);

      // Animation duration changes as per score
      const speed = getCurrentObstacleSpeed();
      el.style.animation = `obstacleMove ${speed/1000}s linear forwards`;

      el.addEventListener('animationend', function() {
        if (gameActive && !el.classList.contains('pass')) {
          el.classList.add('hit');
          setTimeout(() => {
            if (el.parentNode) gameArea.removeChild(el);
          }, 300);
          gameOver();
        } else {
          setTimeout(() => {
            if (el.parentNode) gameArea.removeChild(el);
          }, 300);
        }
        activeObstacle = null;
      });

      gameArea.appendChild(el);
      activeObstacle = {id, text, el};
      typingInputEl.value = '';
      typingInputEl.focus();
    }

    function handleTypingInput() {
      if (!gameActive || !activeObstacle) return;
      const typed = typingInputEl.value.trim().toLowerCase();
      if (activeObstacle.text.toLowerCase() === typed && !activeObstacle.el.classList.contains('pass')) {
        activeObstacle.el.classList.add('pass');
        score++;
        scoreEl.textContent = score;
        setTimeout(() => {
          if (activeObstacle.el.parentNode) gameArea.removeChild(activeObstacle.el);
          activeObstacle = null;
          updateObstacleInterval();
        }, 300);
        typingInputEl.value = '';
      }
    }

    typingInputEl.addEventListener('input', handleTypingInput);

    function updateObstacleInterval() {
      clearInterval(intervalId);
      intervalId = setInterval(addObstacle, getCurrentObstacleSpeed());
    }

    function startGame() {
      gameActive = true;
      score = 0;
      obstacleId = 0;
      activeObstacle = null;
      scoreEl.textContent = score;
      gameArea.querySelectorAll('.obstacle').forEach(o=>o.parentNode.removeChild(o));
      finalScoreEl.style.display = 'none';
      startBtn.style.display = 'none';
      restartBtn.style.display = 'none';
      instructionEl.style.color = "#376313";
      instructionEl.textContent = "‡§Ü‡§®‡•á ‡§µ‡§æ‡§≤‡•á ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§π‡•Ä ‡§ü‡§æ‡§á‡§™ ‡§ï‡§∞‡•á‡§Ç, ‡§§‡§≠‡•Ä ‡§ï‡§ø‡§∞‡§¶‡§æ‡§∞ ‡§¨‡§æ‡§ß‡§æ ‡§∏‡•á ‡§¨‡§ö ‡§∏‡§ï‡•á‡§ó‡§æ!";
      typingInputEl.disabled = false;
      typingInputEl.value = '';
      typingInputEl.focus();

      addObstacle();
      intervalId = setInterval(addObstacle, getCurrentObstacleSpeed());
    }

    function gameOver() {
      gameActive = false;
      clearInterval(intervalId);
      finalScoreEl.textContent = `Game Over! ‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§∏‡•ç‡§ï‡•ã‡§∞: ${score}`;
      finalScoreEl.style.display = 'block';
      restartBtn.style.display = 'inline-block';
      startBtn.style.display = 'none';
      typingInputEl.disabled = true;
      instructionEl.textContent = "Restart ‡§¶‡§¨‡§æ‡§ï‡§∞ ‡§´‡§ø‡§∞ ‡§ñ‡•á‡§≤‡•á‡§Ç!";
      gameArea.querySelectorAll('.obstacle').forEach(o=>o.parentNode.removeChild(o));
      activeObstacle = null;
    }

    restartBtn.onclick = startGame;
    startBtn.onclick = startGame;
    typingInputEl.onkeydown = function(e) {
      if (e.key === "Enter" && gameActive) handleTypingInput();
    };
  </script>
</body>
</html>